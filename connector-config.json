{
  "name": "iceberg-sink",
  "config": {
    "connector.class": "io.tabular.iceberg.connect.IcebergSinkConnector",
    "iceberg.tables.evolve-schema-enabled" : "true",
    "tasks.max": "1",
    "topics": "iceberg-topic",
    "iceberg.catalog.type": "jdbc",
    "iceberg.catalog.uri": "jdbc:postgresql://postgres:5432/iceberg?user=${POSTGRES_USER}&password=${POSTGRES_PASSWORD}",
    "iceberg.catalog.driver": "org.postgresql.Driver",
    "iceberg.catalog.name": "iceberg",
    "iceberg.catalog.warehouse": "s3://warehouse/",
    "iceberg.catalog.s3.region": "eu-central-1",
    "iceberg.catalog.s3.endpoint": "http://minio:9000",
    "iceberg.catalog.s3.path-style-access": "true",
    "iceberg.catalog.s3.bucket.name": "warehouse",
    "aws.access.key-id": "${AWS_ACCESS_KEY_ID}",
    "aws.secret.access-key": "${AWS_SECRET_ACCESS_KEY}",
    "iceberg.tables.initialize": "true",
    "iceberg.tables": "default_db.purchase_events",
    "iceberg.tables.auto-create-enabled": "true",
    "iceberg.tables.auto-create-namespace": "true",
    "iceberg.tables.schema.evolve": "true",
    "iceberg.tables.auto-create-props.format-version": "2",
    "iceberg.tables.auto-create-props.write.format.default": "parquet",
    "iceberg.tables.auto-create-props.write.parquet.compression-codec": "snappy",
    "iceberg.control.commit-interval-ms": "5000",
    "key.converter": "org.apache.kafka.connect.storage.StringConverter",
    "value.converter": "io.confluent.connect.avro.AvroConverter",
    "iceberg.catalog.io-impl": "org.apache.iceberg.aws.s3.S3FileIO",
    "iceberg.aws.s3.endpoint": "http://minio:9000",
    "iceberg.aws.s3.path-style-access": "true",
    "value.converter.schemas.enable": "true",
    "value.converter.schema.registry.url": "http://schema-registry:8081"
  }
}
